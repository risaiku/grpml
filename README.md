grpml
======

## 概要
このスクリプトは簡易的なメーリングリストを実現するためのものです。

## 機能
* grpml.rb
    * メーリングリスト用のスクリプト
    * 特定のメールアドレスへメールを送信する事により、事前に登録したグループのメンバーへメールを送信する
    * 返信先メールアドレス（Reply-To）の指定
    * エラーメール送信先アドレス（Envelope-From）の指定
    * 受付可能な送信元メールアドレスをグループのメンバーに限定
* grpbr.rb
    * 同報メール用スクリプト
    * 特定のメールアドレスへメールを送信する事により、事前に登録したグループのメンバーへメールを送信する
    * 受付可能な送信元メールアドレスをグループのメンバーに限定

## 使い方
#### メーリングリストへの投稿
メーリングリスト投稿用メールアカウントへ送信
#### 同報メールの投稿
同報メール受付用メールアカウントへ送信

##環境構築
#### 前提事項
* postfixにてメールサーバを運用している（他のMTAで動作するかは未検証）
* rubyが動作する

#### 設定
1. grpml.rb、grpbr.rb と grpml.yml を任意の同一フォルダに格納
1. [ 投稿用メールアカウント ] を作成
1. /etc/aliasesに次のように指定

  ```sh
  # ML 
  [ メーリングリスト投稿用メールアカウント ]: "| /[grpml.rb格納ディレクトリ]/grpml.rb"
  [ 同報メール受付用メールアカウント       ]: "| /[grpbr.rb格納ディレクトリ]/grpbr.rb"
  ```
1. newaliases コマンドを実行
1. grpml.rb、grpbr.rb に実行権限を付与
1. grpml.yml を設定

  | ハッシュキー | 設定値 | 設定する値の型 |
  | --- | --- | --- |
  | ok\_addrs | 投稿を許可するメールアドレス | 文字列のリスト |
  | envelope\_from\_addr | エラーメール送信先メールアドレス | 文字列 |
  | reply\_to\_addr | 投稿用／返信先メールアドレス | 文字列 |

## ライセンス等
MIT License  
Copyright 2015, risaiku  
http://risaiku.net  
https://github.com/risaiku/grpml

